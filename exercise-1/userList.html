<!DOCTYPE html>
<html lang="en"> 
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <link rel="stylesheet"
  href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/
  bootstrap-combined.no-icons.min.css"> -->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">



  
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<!-- <script src="static/js/handlebars.min-v4.7.7.js"/> -->

<script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

<script src="static/js/all-helper.js"></script>
  

  <title>User List</title>
</head>
<body>
  <div class="container mt-5 mb-5">
		<div class="row">
			<div class="col-12" id="userList"></div>
      </div>
    </div>



<script type="text/javascript">
  
  let commonUtility = {

    httpGet: "GET",
    httpPost: "POST",
    serverURL: "https://5dc588200bbd050014fb8ae1.mockapi.io/assessment",

    loadFromControllerAndAddToComponent: function(url, method, successCallback, errorCallback)
     {
      $.ajax({
            type: method,
            url: url,
            data: {},
            success: function (response) {
                successCallback(response)
            },
            error: function (err) {
                errorCallback(err)
            }
        })
    },

    getHbsPromise:function(templateName) {
            return new Promise(function(resolve, reject) {
                $.ajax({
                    url: "/static/hbs-templates/" + templateName + '.hbs',
                    method: 'GET',
                    async: false,
                    cache: true,
                    success: function(data) {
                        resolve(data);
                    },
                    error: function (error) {
                        console.log("error while reading file=", error)
                        reject(error)
                    }
                });
            })
        },

    successCallback: function(userList) {

      commonUtility.getHbsPromise("userList").then((userHtml)=> {
        const userTemplate = Handlebars.compile(userHtml);
        const userDOM = userTemplate({userList:userList});
        $("#userList").html(userDOM);
      });
    }, 

    errorCallback: function(errData) {
      console.warn("Errro while fetching data==", errData);
    }
  }

    commonUtility.loadFromControllerAndAddToComponent(
    commonUtility.serverURL, 
    commonUtility.httpGet, commonUtility.successCallback, commonUtility.errorCallback);
  
  </script>


</body>
</html>